# My Schedule

個人用タスク管理PWA（Vite + React + TypeScript + IndexedDB）

## ローカル起動

```bash
npm ci
npm run dev
```

ブラウザで http://localhost:5173 を開く。

## PWA インストール

1. `npm run build && npm run preview` でプロダクションビルドを起動
2. ブラウザのアドレスバーに表示されるインストールアイコン、またはメニューの「ホーム画面に追加」/「アプリをインストール」を選択
3. インストール後はオフラインでも起動可能

## データ保存

IndexedDB（DB名: `my-schedule-db`）にローカル永続化。ブラウザを閉じてもデータは保持される。

## バックアップ / 復元

- **Settings** 画面からJSONエクスポート/インポートが可能
- エクスポート: 全データ（タスク・グループ・プロジェクト・Bucket・繰り返しテンプレート）をJSONファイルとしてダウンロード
- インポート: エクスポートしたJSONを選択して全上書き復元（既存データは置き換え）
- 定期的なエクスポートを推奨（ブラウザのストレージクリアでデータ消失のリスクあり）

## 依存ライブラリ

- **react-router-dom** - ページルーティング
- **dexie** - IndexedDBラッパー

## 実装状況

### Cycle-01: タスクCRUD
- タスクCRUD（追加/編集/完了トグル/論理削除）
- 一覧のフィルタ（状態/優先度/期限区分）
- 一覧のソート（期限昇順/優先度降順/更新日降順）

### Cycle-02: マスタ管理
- グループ/プロジェクト/BucketのCRUD
- タスクへの分類紐付け・フィルタ

### Cycle-03: PWA + バックアップ
- PWA化（manifest / Service Worker / オフラインキャッシュ）
- JSONエクスポート/インポート

### Cycle-04: 繰り返しテンプレート & 自動生成
- 繰り返しテンプレートCRUD（Repeat画面）
- 対応パターン: 毎週（曜日指定）/ 毎月（日付指定）/ 毎月（第N曜日指定）
- Tasks画面を開くたびに次回タスクを自動生成
- 新規タスク作成時に繰り返し設定を同時作成可能
- バックアップ（Export/Import）にテンプレートを含む

#### 使い方

1. **Repeat** 画面でテンプレートを作成（種別・曜日/日付・優先度などを設定）
2. **Tasks** 画面を開くと、アクティブなテンプレートから次回分のタスクが自動生成される
3. 生成されたタスクには「繰り返し」バッジが表示される

#### 割り切り・制約

- 生成は「次回1件先読み」のみ（複数先は生成しない）
- テンプレートの有効/無効はRepeat画面で切り替え可能
- 月末存在しない日（例: 2月31日）はスキップして翌月以降を探索
- 第5週が存在しない月もスキップ

#### 二重生成防止

- 同一テンプレートID + 同一期限日のタスクが既に存在する場合は生成をスキップ
- `lastGeneratedDate` による安全弁チェック（同日重複呼び出し対策）
- ページリロードしても増殖しない

## 未対応（次サイクル以降）

- ダッシュボード
- 検索
- テスト
